{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/183","repository_url":"https://api.github.com/repos/globalbioticinteractions/nomer","labels_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/183/labels{/name}","comments_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/183/comments","events_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/183/events","html_url":"https://github.com/globalbioticinteractions/nomer/issues/183","id":2390870435,"node_id":"I_kwDOBvmSqc6Ogcmj","number":183,"title":"nomer stops on parallel indexing of same resource","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-07-04T13:24:37Z","updated_at":"2024-07-08T19:06:39Z","closed_at":"2024-07-08T19:06:39Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"steps to reproduce:\r\n\r\n```\r\nnomer clean\r\ngit clone https://github.com/globalbioticinteractions/taxon-graph-builder\r\ncd taxon-graph-builder\r\nnohup make & # \r\n```\r\n\r\nobserved error \r\n\r\n```\r\n[main] INFO org.globalbioticinteractions.nomer.match.ResourceServiceContentBased - caching [https://query.wikidata.org/sparql?format=json&query=PREFIX%20rdfs:%20%3Chttp://www.w3.org/2000/01/rdf-schema%23%3E%0APREFIX%20bd:%20%3Chttp://www.bigdata.com/rdf%23%3E%0APREFIX%20wd:%20%3Chttp://www.wikidata.org/entity/%3E%0APREFIX%20wikibase:%20%3Chttp://wikiba.se/ontology%23%3E%0APREFIX%20wdt:%20%3Chttp://www.wikidata.org/prop/direct/%3E%0ASELECT%20?i%20?l%20WHERE%20%7B%0A%20%20?i%20wdt:P31%20wd:Q427626.%0A%20%20?i%20rdfs:label%20?l%0A%7D] at [/home/jhpoelen/.cache/nomer/tmp/nomer644129068998147992.gz] done.\r\n[main] INFO org.globalbioticinteractions.nomer.match.ResourceServiceReadOnly - using cached [https://query.wikidata.org/sparql?format=json&query=PREFIX%20rdfs:%20%3Chttp://www.w3.org/2000/01/rdf-schema%23%3E%0APREFIX%20bd:%20%3Chttp://www.bigdata.com/rdf%23%3E%0APREFIX%20wd:%20%3Chttp://www.wikidata.org/entity/%3E%0APREFIX%20wikibase:%20%3Chttp://wikiba.se/ontology%23%3E%0APREFIX%20wdt:%20%3Chttp://www.wikidata.org/prop/direct/%3E%0ASELECT%20?i%20?l%20WHERE%20%7B%0A%20%20?i%20wdt:P31%20wd:Q427626.%0A%20%20?i%20rdfs:label%20?l%0A%7D] at [/home/jhpoelen/.cache/nomer/hash/sha256/b959e969ddf4114bd590ec1cdcf7ec572076bd46e2e28e2fee038a3f6d41b9fd/ace0cedb0aa2a691e55c45bdc95dda068d4a8bb1b4086decc3f2803987984fd3.gz]\r\n[main] INFO org.eol.globi.taxon.TaxonCacheService - local taxon cache of [file:/home/jhpoelen/.cache/nomer/wikidata_appended_taxon_ranks.tsv] building...\r\n[main] INFO org.eol.globi.taxon.TaxonCacheService - cache with [107] items built in [0.0] s or [4115.4] items/s.\r\n[main] INFO org.eol.globi.taxon.TaxonCacheService - local taxon cache of [file:/home/jhpoelen/.cache/nomer/wikidata_appended_taxon_ranks.tsv] built.\r\n[main] INFO org.eol.globi.taxon.TaxonCacheService - local taxon map of [file:/home/jhpoelen/.cache/nomer/wikidata_appended_taxon_rank_links.tsv] building...\r\n[main] INFO org.eol.globi.taxon.TaxonCacheService - cache with [4019] items built in [0.2] s or [24506.1] items/s.\r\n[main] INFO org.eol.globi.taxon.TaxonCacheService - local taxon map of [file:/home/jhpoelen/.cache/nomer/wikidata_appended_taxon_rank_links.tsv] built.\r\n\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 4.8% of 840 kB at 1.47 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 10.3% of 840 kB at 1.69 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 15.9% of 840 kB at 1.84 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 21.4% of 840 kB at 2.41 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 26.9% of 840 kB at 2.90 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 32.6% of 840 kB at 2.88 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 38.3% of 840 kB at 3.27 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 43.1% of 840 kB at 3.61 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 48.8% of 840 kB at 4.00 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 54.5% of 840 kB at 4.34 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 60.2% of 840 kB at 4.29 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 65.9% of 840 kB at 4.58 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 71.6% of 840 kB at 4.89 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 77.3% of 840 kB at 5.16 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 83.0% of 840 kB at 5.45 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 88.7% of 840 kB at 5.68 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 94.4% of 840 kB at 5.96 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 100.0% of 840 kB at 6.17 MB/s ETA: < 1 minute\r\n[https://zenodo.org/recor...df104d4ba88a54972f9f49e] 100.0% of 840 kB at 6.17 MB/s completed in < 1 minute\r\n[main] INFO org.globalbioticinteractions.nomer.match.ResourceServiceContentBased - caching [https://query.wikidata.org/sparql?format=json&query=PREFIX%20rdfs:%20%3Chttp://www.w3.org/2000/01/rdf-schema%23%3E%0APREFIX%20bd:%20%3Chttp://www.bigdata.com/rdf%23%3E%0APREFIX%20wd:%20%3Chttp://www.wikidata.org/entity/%3E%0APREFIX%20wikibase:%20%3Chttp://wikiba.se/ontology%23%3E%0APREFIX%20wdt:%20%3Chttp://www.wikidata.org/prop/direct/%3E%0ASELECT%20?i%20?l%20WHERE%20%7B%0A%20%20?i%20wdt:P31%20wd:Q427626.%0A%20%20?i%20rdfs:label%20?l%0A%7D] at [/home/jhpoelen/.cache/nomer/tmp/nomer708058498259317527.gz] done.\r\njava.lang.RuntimeException: failed to create matcher\r\n\tat org.globalbioticinteractions.nomer.match.TermMatcherFactoryTaxonRanks.createTermMatcher(TermMatcherFactoryTaxonRanks.java:68)\r\n\tat org.globalbioticinteractions.nomer.match.TermMatcherRegistry.termMatcherFor(TermMatcherRegistry.java:180)\r\n\tat org.globalbioticinteractions.nomer.match.MatchUtil.lambda$resolveMatcher$0(MatchUtil.java:58)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\tat java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1361)\r\n\tat java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:126)\r\n\tat java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:499)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:486)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\r\n\tat java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:152)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:531)\r\n\tat org.globalbioticinteractions.nomer.match.MatchUtil.resolveMatcher(MatchUtil.java:63)\r\n\tat org.globalbioticinteractions.nomer.match.MatchUtil.getTermMatcher(MatchUtil.java:50)\r\n\tat org.globalbioticinteractions.nomer.cmd.CmdReplace.run(CmdReplace.java:21)\r\n\tat picocli.CommandLine.executeUserObject(CommandLine.java:1939)\r\n\tat picocli.CommandLine.access$1300(CommandLine.java:145)\r\n\tat picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2352)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2314)\r\n\tat picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)\r\n\tat picocli.CommandLine$RunLast.execute(CommandLine.java:2316)\r\n\tat picocli.CommandLine.execute(CommandLine.java:2078)\r\n\tat org.globalbioticinteractions.nomer.Nomer.run(Nomer.java:57)\r\n\tat org.globalbioticinteractions.nomer.Nomer.main(Nomer.java:46)\r\nCaused by: java.io.IOException: failed to access [https://query.wikidata.org/sparql?format=json&query=PREFIX%20rdfs:%20%3Chttp://www.w3.org/2000/01/rdf-schema%23%3E%0APREFIX%20bd:%20%3Chttp://www.bigdata.com/rdf%23%3E%0APREFIX%20wd:%20%3Chttp://www.wikidata.org/entity/%3E%0APREFIX%20wikibase:%20%3Chttp://wikiba.se/ontology%23%3E%0APREFIX%20wdt:%20%3Chttp://www.wikidata.org/prop/direct/%3E%0ASELECT%20?i%20?l%20WHERE%20%7B%0A%20%20?i%20wdt:P31%20wd:Q427626.%0A%20%20?i%20rdfs:label%20?l%0A%7D] in preston verse [\r\n\tat org.globalbioticinteractions.nomer.match.ResourceServiceContentBased.retrieve(ResourceServiceContentBased.java:81)\r\n\tat org.globalbioticinteractions.nomer.match.ResourceServiceFactoryImpl$1.retrieve(ResourceServiceFactoryImpl.java:37)\r\n\tat org.globalbioticinteractions.nomer.match.TermMatcherContextCaching.retrieve(TermMatcherContextCaching.java:19)\r\n\tat org.globalbioticinteractions.nomer.match.WikidataTaxonRankLoader.importTaxonRanks(WikidataTaxonRankLoader.java:47)\r\n\tat org.globalbioticinteractions.nomer.match.TermMatcherFactoryTaxonRanks.createTermMatcher(TermMatcherFactoryTaxonRanks.java:54)\r\n\t... 24 more\r\nCaused by: org.apache.commons.io.FileExistsException: File element in parameter 'destFile' already exists: '/home/jhpoelen/.cache/nomer/hash/sha256/b959e969ddf4114bd590ec1cdcf7ec572076bd46e2e28e2fee038a3f6d41b9fd/ace0cedb0aa2a691e55c45bdc95dda068d4a8bb1b4086decc3f2803987984fd3.gz'\r\n\tat org.apache.commons.io.FileUtils.requireAbsent(FileUtils.java:2688)\r\n\tat org.apache.commons.io.FileUtils.moveFile(FileUtils.java:2398)\r\n\tat org.apache.commons.io.FileUtils.moveFile(FileUtils.java:2376)\r\n\tat org.globalbioticinteractions.nomer.match.ResourceServiceContentBased.retrieve(ResourceServiceContentBased.java:79)\r\n\t... 28 more\r\nmake: *** [Makefile:112: target/taxonCache.tsv.gz] Error 1\r\n```","closed_by":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/183/timeline","performed_via_github_app":null,"state_reason":"completed"}