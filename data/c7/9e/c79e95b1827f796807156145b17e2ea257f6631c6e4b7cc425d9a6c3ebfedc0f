[{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2651083329","html_url":"https://github.com/globalbioticinteractions/nomer/issues/197#issuecomment-2651083329","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/197","id":2651083329,"node_id":"IC_kwDOBvmSqc6eBFJB","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-11T15:02:10Z","updated_at":"2025-02-11T15:02:10Z","body":"@zedomel thanks for asking about specifying a higher order rank to narrow taxonomic context\n\nA while ago, I vaguely remember implementing something like:\n\n```\necho -e \"\\tAnimalia | Agathis montana\" | nomer append  col\n```\n\nin which \"Animalia | \" prefix would set the taxonomic context. But . . . for some reason, the functionality is no longer working as expected as can been seen below.\n\n```\necho -e \"\\tAnimalia | Agathis montana\"\\\n | nomer append  --include-header col\\\n | mlr --itsvlite --oxtab cat\n```\n\nNote, however, that nomer does prune the ```Animalia``` prefix. \n\n```\nprovidedExternalId      \nprovidedName            Animalia | Agathis montana\nrelationName            HAS_ACCEPTED_NAME\nresolvedExternalId      COL:662TS\nresolvedName            Agathis montana\nresolvedAuthorship      de Laub.\nresolvedRank            species\nresolvedCommonNames     \nresolvedPath            Biota | Plantae | Tracheophyta | Pinopsida | Pinales | Araucariaceae | Agathis | Agathis montana\nresolvedPathIds         COL:5T6MX | COL:P | COL:TP | COL:GG | COL:623FD | COL:6MH | COL:BDV7Y | COL:662TS\nresolvedPathNames       unranked | kingdom | phylum | class | order | family | genus | species\nresolvedPathAuthorships |  |  |  |  |  |  | de Laub.\nresolvedExternalUrl     https://www.catalogueoflife.org/data/taxon/662TS\n\nprovidedExternalId      \nprovidedName            Animalia | Agathis montana\nrelationName            HAS_ACCEPTED_NAME\nresolvedExternalId      COL:6635S\nresolvedName            Agathis montana\nresolvedAuthorship      Shestakov, 1932\nresolvedRank            species\nresolvedCommonNames     \nresolvedPath            Biota | Animalia | Arthropoda | Insecta | Hymenoptera | Ichneumonoidea | Braconidae | Agathis | Agathis montana\nresolvedPathIds         COL:5T6MX | COL:N | COL:RT | COL:H6 | COL:HYM | COL:62255 | COL:7D4 | COL:BJ5YH | COL:6635S\nresolvedPathNames       unranked | kingdom | phylum | class | order | superfamily | family | genus | species\nresolvedPathAuthorships |  |  |  |  |  |  |  | Shestakov, 1932\nresolvedExternalUrl     https://www.catalogueoflife.org/data/taxon/6635S\n```\n\n\nAlso, I much like your idea \n\n> echo -e \"\\tAgathis montana\\tPlantae\" | nomer append -p nomer.properties col\n\nmore later . . . ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2651083329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2652219977","html_url":"https://github.com/globalbioticinteractions/nomer/issues/197#issuecomment-2652219977","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/197","id":2652219977,"node_id":"IC_kwDOBvmSqc6eFapJ","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-11T22:37:47Z","updated_at":"2025-02-11T22:59:44Z","body":"Here is the implementation / test that I was referring to -\n\nhttps://github.com/globalbioticinteractions/nomer/blob/edfc3dbab75a609f3362b162312e865b9b757f9d/nomer/src/test/java/org/eol/globi/service/TermMatcherHierarchicalTest.java\n\nHmm. Not quite sure why the doesn't work anymore. Perhaps you @zedomel  could have a look?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2652219977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2667070968","html_url":"https://github.com/globalbioticinteractions/nomer/issues/197#issuecomment-2667070968","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/197","id":2667070968,"node_id":"IC_kwDOBvmSqc6e-EX4","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-18T22:31:44Z","updated_at":"2025-02-18T22:31:44Z","body":"After a bug fix that prevented the hierarchical taxon matcher to kick in, I was able to generate the expected result of\n\n```bash\necho -e \"\\tAnimalia | Agathis montana\"\\\n | nomer append  --include-header col\\\n | mlr --itsvlite --oxtab cat\n```\n\nshowing a NONE match for the _plant_ called Agathis montana, and a HAS_ACCEPTED_NAME match for the animal called Agathis montana . \n\n```\nprovidedExternalId      \nprovidedName            Animalia | Agathis montana\nrelationName            NONE\nresolvedExternalId      COL:662TS\nresolvedName            Agathis montana\nresolvedAuthorship      de Laub.\nresolvedRank            species\nresolvedCommonNames     \nresolvedPath            Biota | Plantae | Tracheophyta | Pinopsida | Pinales | Araucariaceae | Agathis | Agathis montana\nresolvedPathIds         COL:5T6MX | COL:P | COL:TP | COL:GG | COL:623FD | COL:6MH | COL:BDV7Y | COL:662TS\nresolvedPathNames       unranked | kingdom | phylum | class | order | family | genus | species\nresolvedPathAuthorships |  |  |  |  |  |  | de Laub.\nresolvedExternalUrl     https://www.catalogueoflife.org/data/taxon/662TS\n\nprovidedExternalId      \nprovidedName            Animalia | Agathis montana\nrelationName            HAS_ACCEPTED_NAME\nresolvedExternalId      COL:6635S\nresolvedName            Agathis montana\nresolvedAuthorship      Shestakov, 1932\nresolvedRank            species\nresolvedCommonNames     \nresolvedPath            Biota | Animalia | Arthropoda | Insecta | Hymenoptera | Ichneumonoidea | Braconidae | Agathis | Agathis montana\nresolvedPathIds         COL:5T6MX | COL:N | COL:RT | COL:H6 | COL:HYM | COL:62255 | COL:7D4 | COL:BJ5YH | COL:6635S\nresolvedPathNames       unranked | kingdom | phylum | class | order | superfamily | family | genus | species\nresolvedPathAuthorships |  |  |  |  |  |  |  | Shestakov, 1932\nresolvedExternalUrl     https://www.catalogueoflife.org/data/taxon/6635S\n```\n\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2667070968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2667073512","html_url":"https://github.com/globalbioticinteractions/nomer/issues/197#issuecomment-2667073512","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/197","id":2667073512,"node_id":"IC_kwDOBvmSqc6e-E_o","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-18T22:33:35Z","updated_at":"2025-02-18T22:33:35Z","body":"Next would be to allow for the use of \"kingdom\" ranks (or similar higher order ranks) to generate NONE matches for homonyms with unmatched higher order.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2667073512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2667122515","html_url":"https://github.com/globalbioticinteractions/nomer/issues/197#issuecomment-2667122515","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/197","id":2667122515,"node_id":"IC_kwDOBvmSqc6e-Q9T","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-18T23:05:02Z","updated_at":"2025-02-18T23:06:33Z","body":"After some changes, the following command\n\n\n```bash\necho -e \"\\tAgathis montana\\tPlantae\"\\\n | nomer append --properties nomer.properties --include-header col\\\n | mlr --itsvlite --oxtab cat\n```\n\nwith ```nomer.properties``` being\n\n```\nnomer.schema.input=[{\"column\":0,\"type\":\"externalId\"},{\"column\": 1,\"type\":\"name\"},{\"column\": 2,\"type\":\"path\"}]\n```\n\nproduces a NONE match for the fungus, and a HAS_ACCEPTED_NAME for the plant with same name _Agathis montana_ \n\n```\nprovidedExternalId      \nprovidedName            Agathis montana\nprovidedPath            Plantae\nrelationName            HAS_ACCEPTED_NAME\nresolvedExternalId      COL:662TS\nresolvedName            Agathis montana\nresolvedAuthorship      de Laub.\nresolvedRank            species\nresolvedCommonNames     \nresolvedPath            Biota | Plantae | Tracheophyta | Pinopsida | Pinales | Araucariaceae | Agathis | Agathis montana\nresolvedPathIds         COL:5T6MX | COL:P | COL:TP | COL:GG | COL:623FD | COL:6MH | COL:BDV7Y | COL:662TS\nresolvedPathNames       unranked | kingdom | phylum | class | order | family | genus | species\nresolvedPathAuthorships |  |  |  |  |  |  | de Laub.\nresolvedExternalUrl     https://www.catalogueoflife.org/data/taxon/662TS\n\nprovidedExternalId      \nprovidedName            Agathis montana\nprovidedPath            Plantae\nrelationName            NONE\nresolvedExternalId      COL:6635S\nresolvedName            Agathis montana\nresolvedAuthorship      Shestakov, 1932\nresolvedRank            species\nresolvedCommonNames     \nresolvedPath            Biota | Animalia | Arthropoda | Insecta | Hymenoptera | Ichneumonoidea | Braconidae | Agathis | Agathis montana\nresolvedPathIds         COL:5T6MX | COL:N | COL:RT | COL:H6 | COL:HYM | COL:62255 | COL:7D4 | COL:BJ5YH | COL:6635S\nresolvedPathNames       unranked | kingdom | phylum | class | order | superfamily | family | genus | species\nresolvedPathAuthorships |  |  |  |  |  |  |  | Shestakov, 1932\nresolvedExternalUrl     https://www.catalogueoflife.org/data/taxon/6635S\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2667122515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2667160697","html_url":"https://github.com/globalbioticinteractions/nomer/issues/197#issuecomment-2667160697","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/197","id":2667160697,"node_id":"IC_kwDOBvmSqc6e-aR5","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-18T23:34:08Z","updated_at":"2025-02-18T23:34:08Z","body":"So, with this, you can exclude names based on some higher taxonomic order. You can even include multiple taxon orders. And, you'd have to use the ```nomer.properties``` with the \"path\" element like - \n\n```\nnomer.schema.input=[{\"column\":0,\"type\":\"externalId\"},{\"column\": 1,\"type\":\"name\"},{\"column\": 2,\"type\":\"path\"}]\n```\n\nIf you'd like to use ```kingdomName```, that'd be possible also, but may take a little while to implement. Unless you or someone else would like to give it a try. \n\n@zedomel curious to hear your thoughts on this.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2667160697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2668246411","html_url":"https://github.com/globalbioticinteractions/nomer/issues/197#issuecomment-2668246411","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/197","id":2668246411,"node_id":"IC_kwDOBvmSqc6fCjWL","user":{"login":"zedomel","id":7684564,"node_id":"MDQ6VXNlcjc2ODQ1NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/7684564?v=4","gravatar_id":"","url":"https://api.github.com/users/zedomel","html_url":"https://github.com/zedomel","followers_url":"https://api.github.com/users/zedomel/followers","following_url":"https://api.github.com/users/zedomel/following{/other_user}","gists_url":"https://api.github.com/users/zedomel/gists{/gist_id}","starred_url":"https://api.github.com/users/zedomel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zedomel/subscriptions","organizations_url":"https://api.github.com/users/zedomel/orgs","repos_url":"https://api.github.com/users/zedomel/repos","events_url":"https://api.github.com/users/zedomel/events{/privacy}","received_events_url":"https://api.github.com/users/zedomel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-19T10:41:04Z","updated_at":"2025-02-19T10:41:04Z","body":"Hi @jhpoelen \n\nIt is amazing....\nI will try this feature in the GBIF/iDigBio data that we are working... \n\nThank very much.\n\nBest.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2668246411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2668879116","html_url":"https://github.com/globalbioticinteractions/nomer/issues/197#issuecomment-2668879116","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/197","id":2668879116,"node_id":"IC_kwDOBvmSqc6fE90M","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-19T14:50:11Z","updated_at":"2025-02-19T14:50:11Z","body":"Ok, glad to hear you like the feature - I'll prepare a nomer release for you so you can more easily access the functionality.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2668879116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2669059582","html_url":"https://github.com/globalbioticinteractions/nomer/issues/197#issuecomment-2669059582","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/197","id":2669059582,"node_id":"IC_kwDOBvmSqc6fFp3-","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-19T15:53:34Z","updated_at":"2025-02-19T15:53:34Z","body":"improvements discussed above available in https://github.com/globalbioticinteractions/nomer/releases/tag/0.5.15 . \n\nThanks for your input @zedomel !","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/2669059582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]