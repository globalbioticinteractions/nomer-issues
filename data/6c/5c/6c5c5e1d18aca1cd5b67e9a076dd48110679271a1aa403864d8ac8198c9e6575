{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/86","repository_url":"https://api.github.com/repos/globalbioticinteractions/nomer","labels_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/86/labels{/name}","comments_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/86/comments","events_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/86/events","html_url":"https://github.com/globalbioticinteractions/nomer/issues/86","id":1282743341,"node_id":"I_kwDOBvmSqc5MdRwt","number":86,"title":"Repackaged Taxonomic Backbone of Global Biodiversity Information Facility (GBIF)","user":{"login":"zedomel","id":7684564,"node_id":"MDQ6VXNlcjc2ODQ1NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/7684564?v=4","gravatar_id":"","url":"https://api.github.com/users/zedomel","html_url":"https://github.com/zedomel","followers_url":"https://api.github.com/users/zedomel/followers","following_url":"https://api.github.com/users/zedomel/following{/other_user}","gists_url":"https://api.github.com/users/zedomel/gists{/gist_id}","starred_url":"https://api.github.com/users/zedomel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zedomel/subscriptions","organizations_url":"https://api.github.com/users/zedomel/orgs","repos_url":"https://api.github.com/users/zedomel/repos","events_url":"https://api.github.com/users/zedomel/events{/privacy}","received_events_url":"https://api.github.com/users/zedomel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":22,"created_at":"2022-06-23T17:45:11Z","updated_at":"2024-03-14T11:38:53Z","closed_at":"2024-03-14T11:38:53Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi @jhpoelen \r\n\r\nI'm trying to create a new version of gbif backbone to use in `nomer`.\r\nI download the script in the repository [https://doi.org/10.15468/39omei](https://doi.org/10.15468/39omei) and fix some minor errors:\r\n\r\n- The URL of GBIF current backbone change to [https://hosted-datasets.gbif.org/datasets/backbone/current/simple.txt.gz](https://hosted-datasets.gbif.org/datasets/backbone/current/simple.txt.gz)\r\n- Change some files names which are producing `file not found` error: `gbif-backbone-simple.txt.gz'\r\n\r\nI ran the script and it produce the expected files which I put in a new repository [https://zenodo.org/record/6707049](https://zenodo.org/record/6707049).\r\n\r\nThen I update the `nomer.properties` file:\r\n```properties\r\n...\r\nnomer.gbif.ids=gz:https://zenodo.org/record/6707049/files/gbif-backbone-by-id.tsv.gz!/gbif-backbone-by-id.tsv\r\nnomer.gbif.names=gz:https://zenodo.org/record/6707049/files/gbif-backbone-by-name.tsv.gz!/gbif-backbone-by-name.tsv\r\n```\r\n\r\nBut when I run: \r\n`echo -e \"\\tDunderbergia granulosa\" | nomer append gbif -p nomer.properties`\r\n\r\nThe following error is produced:\r\n```bash\r\n[main] INFO org.globalbioticinteractions.nomer.match.TermMatcherRegistry - using matcher [gbif-taxon]\r\n[main] INFO org.globalbioticinteractions.nomer.match.GBIFTaxonService - indexing GBIF taxonomy ids...\r\n[main] INFO org.globalbioticinteractions.nomer.match.ResourceServiceContentBased - using local Preston data dir: [/home/jose_asalim_gmail_com/test/./.nomer/data]\r\n[main] INFO org.globalbioticinteractions.nomer.match.ResourceServiceContentBased - caching [gz:https://zenodo.org/record/6707049/files/gbif-backbone-by-id.tsv.gz!/gbif-backbone-by-id.tsv] at [/home/jose_asalim_gmail_com/test/./.nomer/tmp/nomer109046510492550888.gz]...\r\njava.io.IOException: problem retrieving [gz:https://zenodo.org/record/6707049/files/gbif-backbone-by-id.tsv.gz!/gbif-backbone-by-id.tsv]\r\n\tat bio.guoda.preston.cmd.CmdGet.handleContentQuery(CmdGet.java:76)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:52)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:39)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:35)\r\n\tat org.globalbioticinteractions.nomer.match.ResourceServiceContentBased.retrieve(ResourceServiceContentBased.java:83)\r\n\tat org.globalbioticinteractions.nomer.match.ResourceServiceFactoryImpl$1.retrieve(ResourceServiceFactoryImpl.java:40)\r\n\tat org.globalbioticinteractions.nomer.match.TermMatcherContextCaching.retrieve(TermMatcherContextCaching.java:16)\r\n\tat org.globalbioticinteractions.nomer.match.GBIFTaxonService$3.hasNext(GBIFTaxonService.java:349)\r\n\tat org.mapdb.DB.createTreeMap(DB.java:872)\r\n\tat org.mapdb.DB$BTreeMapMaker.make(DB.java:661)\r\n\tat org.globalbioticinteractions.nomer.match.GBIFTaxonService.indexIds(GBIFTaxonService.java:379)\r\n\tat org.globalbioticinteractions.nomer.match.GBIFTaxonService.indexIfNeeded(GBIFTaxonService.java:199)\r\n\tat org.globalbioticinteractions.nomer.match.GBIFTaxonService.lazyInit(GBIFTaxonService.java:176)\r\n\tat org.globalbioticinteractions.nomer.match.GBIFTaxonService.lazyInitIfNeeded(GBIFTaxonService.java:161)\r\n\tat org.globalbioticinteractions.nomer.match.GBIFTaxonService.match(GBIFTaxonService.java:62)\r\n\tat org.eol.globi.service.TermMatcherHierarchical.match(TermMatcherHierarchical.java:57)\r\n\tat org.globalbioticinteractions.nomer.util.AppendingRowHandler.onRow(AppendingRowHandler.java:35)\r\n\tat org.globalbioticinteractions.nomer.match.MatchUtil.apply(MatchUtil.java:87)\r\n\tat org.globalbioticinteractions.nomer.match.MatchUtil.match(MatchUtil.java:39)\r\n\tat org.globalbioticinteractions.nomer.cmd.CmdAppend.run(CmdAppend.java:20)\r\n\tat picocli.CommandLine.executeUserObject(CommandLine.java:1939)\r\n\tat picocli.CommandLine.access$1300(CommandLine.java:145)\r\n\tat picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2352)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2314)\r\n\tat picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)\r\n\tat picocli.CommandLine$RunLast.execute(CommandLine.java:2316)\r\n\tat picocli.CommandLine.execute(CommandLine.java:2078)\r\n\tat org.globalbioticinteractions.nomer.Nomer.run(Nomer.java:57)\r\n\tat org.globalbioticinteractions.nomer.Nomer.main(Nomer.java:46)\r\nCaused by: java.io.IOException: [gz:https://zenodo.org/record/6707049/files/gbif-backbone-by-id.tsv.gz!/gbif-backbone-by-id.tsv] not found.\r\n\tat bio.guoda.preston.cmd.CmdGet.handleContentQuery(CmdGet.java:72)\r\n\t... 29 more\r\njava.lang.RuntimeException: java.io.IOException: problem retrieving [gz:https://zenodo.org/record/6707049/files/gbif-backbone-by-id.tsv.gz!/gbif-backbone-by-id.tsv]\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:57)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:39)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:35)\r\n\tat org.globalbioticinteractions.nomer.match.ResourceServiceContentBased.retrieve(ResourceServiceContentBased.java:83)\r\n\tat org.globalbioticinteractions.nomer.match.ResourceServiceFactoryImpl$1.retrieve(ResourceServiceFactoryImpl.java:40)\r\n\tat org.globalbioticinteractions.nomer.match.TermMatcherContextCaching.retrieve(TermMatcherContextCaching.java:16)\r\n\tat org.globalbioticinteractions.nomer.match.GBIFTaxonService$3.hasNext(GBIFTaxonService.java:349)\r\n\tat org.mapdb.DB.createTreeMap(DB.java:872)\r\n\tat org.mapdb.DB$BTreeMapMaker.make(DB.java:661)\r\n\tat org.globalbioticinteractions.nomer.match.GBIFTaxonService.indexIds(GBIFTaxonService.java:379)\r\n\tat org.globalbioticinteractions.nomer.match.GBIFTaxonService.indexIfNeeded(GBIFTaxonService.java:199)\r\n\tat org.globalbioticinteractions.nomer.match.GBIFTaxonService.lazyInit(GBIFTaxonService.java:176)\r\n\tat org.globalbioticinteractions.nomer.match.GBIFTaxonService.lazyInitIfNeeded(GBIFTaxonService.java:161)\r\n\tat org.globalbioticinteractions.nomer.match.GBIFTaxonService.match(GBIFTaxonService.java:62)\r\n\tat org.eol.globi.service.TermMatcherHierarchical.match(TermMatcherHierarchical.java:57)\r\n\tat org.globalbioticinteractions.nomer.util.AppendingRowHandler.onRow(AppendingRowHandler.java:35)\r\n\tat org.globalbioticinteractions.nomer.match.MatchUtil.apply(MatchUtil.java:87)\r\n\tat org.globalbioticinteractions.nomer.match.MatchUtil.match(MatchUtil.java:39)\r\n\tat org.globalbioticinteractions.nomer.cmd.CmdAppend.run(CmdAppend.java:20)\r\n\tat picocli.CommandLine.executeUserObject(CommandLine.java:1939)\r\n\tat picocli.CommandLine.access$1300(CommandLine.java:145)\r\n\tat picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2352)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2314)\r\n\tat picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)\r\n\tat picocli.CommandLine$RunLast.execute(CommandLine.java:2316)\r\n\tat picocli.CommandLine.execute(CommandLine.java:2078)\r\n\tat org.globalbioticinteractions.nomer.Nomer.run(Nomer.java:57)\r\n\tat org.globalbioticinteractions.nomer.Nomer.main(Nomer.java:46)\r\nCaused by: java.io.IOException: problem retrieving [gz:https://zenodo.org/record/6707049/files/gbif-backbone-by-id.tsv.gz!/gbif-backbone-by-id.tsv]\r\n\tat bio.guoda.preston.cmd.CmdGet.handleContentQuery(CmdGet.java:76)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:52)\r\n\t... 28 more\r\nCaused by: java.io.IOException: [gz:https://zenodo.org/record/6707049/files/gbif-backbone-by-id.tsv.gz!/gbif-backbone-by-id.tsv] not found.\r\n\tat bio.guoda.preston.cmd.CmdGet.handleContentQuery(CmdGet.java:72)\r\n\t... 29 more\r\n```\r\n\r\nLooks that the file `gz:https://zenodo.org/record/6707049/files/gbif-backbone-by-id.tsv.gz!/gbif-backbone-by-id.tsv` was not found, but it exists and I can download it using `wget`\r\n\r\nHow can I change `nomer` configuration to use this new version of GBIF backbone?\r\n\r\nthanks\r\njos√©.\r\n","closed_by":{"login":"zedomel","id":7684564,"node_id":"MDQ6VXNlcjc2ODQ1NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/7684564?v=4","gravatar_id":"","url":"https://api.github.com/users/zedomel","html_url":"https://github.com/zedomel","followers_url":"https://api.github.com/users/zedomel/followers","following_url":"https://api.github.com/users/zedomel/following{/other_user}","gists_url":"https://api.github.com/users/zedomel/gists{/gist_id}","starred_url":"https://api.github.com/users/zedomel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zedomel/subscriptions","organizations_url":"https://api.github.com/users/zedomel/orgs","repos_url":"https://api.github.com/users/zedomel/repos","events_url":"https://api.github.com/users/zedomel/events{/privacy}","received_events_url":"https://api.github.com/users/zedomel/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/86/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/86/timeline","performed_via_github_app":null,"state_reason":"completed"}