[{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245623372","html_url":"https://github.com/globalbioticinteractions/nomer/issues/105#issuecomment-1245623372","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/105","id":1245623372,"node_id":"IC_kwDOBvmSqc5KPrRM","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T16:03:35Z","updated_at":"2022-09-13T16:13:00Z","body":"@jtmiller28 great idea! \r\n\r\nI believe that @zedomel  @joelnitta also describe something similar #68 and #78  . Can you confirm?\r\n\r\nI have anecdotal evidence to suggest that fuzzy matching create more issues than they solve (see @dimus comments in #68) . . . but I understand that having a ```similar_to``` match can be more useful than none at all.\r\n\r\nAn alternative using existing functionality would be to:\r\n\r\n1. first do an exact match\r\n2. then do a parsed match (see #104 )\r\n3. then use a (slower) service that supports fuzzy matching\r\n4. rematch fuzzy matches from 3. using 1. \r\n\r\nExample that use matcher supporting fuzzy matching include \"globalnames\"\r\n\r\n```\r\n$ echo -e '\\tEchinocereus engelmannii subsp. engelmanni' | nomer append globalnames\r\n[main] INFO org.globalbioticinteractions.nomer.match.TermMatcherRegistry - using matcher [globi-globalnames]\r\n\tEchinocereus engelmannii subsp. engelmanni\tSIMILAR_TO\tITIS:527819\tEchinocereus engelmannii engelmannii\tVariety\t\tPlantae | Viridiplantae | Streptophyta | Embryophyta | Tracheophyta | Spermatophytina | Magnoliopsida | Caryophyllanae | Caryophyllales | Cactaceae | Echinocereus | Echinocereus engelmannii | Echinocereus engelmannii engelmannii\tITIS:202422 | ITIS:954898 | ITIS:846494 | ITIS:954900 | ITIS:846496 | ITIS:846504 | ITIS:18063 | ITIS:846539 | ITIS:19520 | ITIS:19685 | ITIS:19803 | ITIS:19806 | ITIS:527819\tKingdom | Subkingdom | Infrakingdom | Superdivision | Division | Subdivision | Class | Superorder | Order | Family | Genus | Species | Variety\thttp://www.itis.gov/servlet/SingleRpt/SingleRpt?search_topic=TSN&search_value=527819\t\r\n\tEchinocereus engelmannii subsp. engelmanni\tSIMILAR_TO\tITIS:19806\tEchinocereus engelmannii\tSpecies\t\tPlantae | Viridiplantae | Streptophyta | Embryophyta | Tracheophyta | Spermatophytina | Magnoliopsida | Caryophyllanae | Caryophyllales | Cactaceae | Echinocereus | Echinocereus engelmannii\tITIS:202422 | ITIS:954898 | ITIS:846494 | ITIS:954900 | ITIS:846496 | ITIS:846504 | ITIS:18063 | ITIS:846539 | ITIS:19520 | ITIS:19685 | ITIS:19803 | ITIS:19806\tKingdom | Subkingdom | Infrakingdom | Superdivision | Division | Subdivision | Class | Superorder | Order | Family | Genus | Species\thttp://www.itis.gov/servlet/SingleRpt/SingleRpt?search_topic=TSN&search_value=19806\t\r\n\tEchinocereus engelmannii subsp. engelmanni\tSIMILAR_TO\tGBIF:7283894\tEchinocereus engelmannii engelmannii\tsubspecies\t\tPlantae | Tracheophyta | Magnoliopsida | Caryophyllales | Cactaceae | Echinocereus | Echinocereus engelmannii ex | Echinocereus engelmannii engelmannii\tGBIF:6 | GBIF:7707728 | GBIF:220 | GBIF:422 | GBIF:2519 | GBIF:5384005 | GBIF:8219081 | GBIF:7283894\tkingdom | phylum | class | order | family | genus | species | subspecieshttp://www.gbif.org/species/7283894\t\r\n\tEchinocereus engelmannii subsp. engelmanni\tSIMILAR_TO\tGBIF:7283894\tEchinocereus engelmannii engelmannii\tsubspecies\t\tPlantae | Tracheophyta | Magnoliopsida | Caryophyllales | Cactaceae | Echinocereus | Echinocereus engelmannii ex | Echinocereus engelmannii engelmannii\tGBIF:6 | GBIF:7707728 | GBIF:220 | GBIF:422 | GBIF:2519 | GBIF:5384005 | GBIF:8219081 | GBIF:7283894\tkingdom | phylum | class | order | family | genus | species | subspecieshttp://www.gbif.org/species/7283894\r\n```\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245623372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245645531","html_url":"https://github.com/globalbioticinteractions/nomer/issues/105#issuecomment-1245645531","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/105","id":1245645531,"node_id":"IC_kwDOBvmSqc5KPwrb","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T16:19:15Z","updated_at":"2022-09-13T16:19:15Z","body":"Another option is to create an explicit list of common typos (I believe some taxonomic name authorities have them already), and and apply those corrections. In this way, you have more control over exactly what name you'd like to re-interpret and who made the claim that X was a misspelling of Y.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245645531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245649373","html_url":"https://github.com/globalbioticinteractions/nomer/issues/105#issuecomment-1245649373","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/105","id":1245649373,"node_id":"IC_kwDOBvmSqc5KPxnd","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T16:22:08Z","updated_at":"2022-09-13T16:22:08Z","body":"I created something like the typo list via https://github.com/globalbioticinteractions/globi-taxon-names/blob/main/taxon-name-mapping.csv . \r\n\r\nThis (or similar) mappings can be applied using something like:\r\n\r\n```\r\n$ echo -e \"\\tAblabesymia\" | nomer append translate-names\r\n...\r\n\tAblabesymia\tSAME_AS\t\tAblabesmyia\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245649373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245650041","html_url":"https://github.com/globalbioticinteractions/nomer/issues/105#issuecomment-1245650041","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/105","id":1245650041,"node_id":"IC_kwDOBvmSqc5KPxx5","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T16:22:43Z","updated_at":"2022-09-13T16:23:02Z","body":"where SAME_AS should probably changed to something like REPLACED_WITH or TRANSLATED_TO or INTERPRETED_AS","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245650041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245682644","html_url":"https://github.com/globalbioticinteractions/nomer/issues/105#issuecomment-1245682644","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/105","id":1245682644,"node_id":"IC_kwDOBvmSqc5KP5vU","user":{"login":"dimus","id":12124,"node_id":"MDQ6VXNlcjEyMTI0","avatar_url":"https://avatars.githubusercontent.com/u/12124?v=4","gravatar_id":"","url":"https://api.github.com/users/dimus","html_url":"https://github.com/dimus","followers_url":"https://api.github.com/users/dimus/followers","following_url":"https://api.github.com/users/dimus/following{/other_user}","gists_url":"https://api.github.com/users/dimus/gists{/gist_id}","starred_url":"https://api.github.com/users/dimus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimus/subscriptions","organizations_url":"https://api.github.com/users/dimus/orgs","repos_url":"https://api.github.com/users/dimus/repos","events_url":"https://api.github.com/users/dimus/events{/privacy}","received_events_url":"https://api.github.com/users/dimus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T16:51:48Z","updated_at":"2022-09-13T16:56:37Z","body":"For cases when you are searching more than one data-source, exact match might be deceiving by ignoring alternative spellings of a name. For example if some databases have 'Aus bus', while others 'Aus bus L. 1777' or 'Aus bus Linn.' some results might be missing. So you would have to run both canonical and exact matches. I think parsing got to a point when it produces canonical form correctly in vast majority of cases, so I stopped doing exact match these days.\r\n\r\nThe way http:/verifier.globalnames.org is doing the search goes like this:\r\n1. Parsing input with https://parser.globalnames.org. If the input name is not a virus - continue, if virus - perform virus match.\r\n2. exact canonical match. Stop if got the result\r\n3. fuzzy canonical match, stop if got the result (using stemmed canonical form)\r\n4. exact match removing middle or last epithet, converting 'Aus bus cus' to both 'Aus bus' and 'Aus cus', Stop if got result\r\n5. fuzzy match for the same removal of middle and last.\r\n6. exact match of genus part\r\n\r\nMore details are at https://verifier.globalnames.org/about\r\n\r\nThen it is important to sort matched results, because not all matches are equal. For example input and output can have different authorships, one name can be valid, while other be a synonym etc.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245682644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245690977","html_url":"https://github.com/globalbioticinteractions/nomer/issues/105#issuecomment-1245690977","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/105","id":1245690977,"node_id":"IC_kwDOBvmSqc5KP7xh","user":{"login":"dimus","id":12124,"node_id":"MDQ6VXNlcjEyMTI0","avatar_url":"https://avatars.githubusercontent.com/u/12124?v=4","gravatar_id":"","url":"https://api.github.com/users/dimus","html_url":"https://github.com/dimus","followers_url":"https://api.github.com/users/dimus/followers","following_url":"https://api.github.com/users/dimus/following{/other_user}","gists_url":"https://api.github.com/users/dimus/gists{/gist_id}","starred_url":"https://api.github.com/users/dimus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimus/subscriptions","organizations_url":"https://api.github.com/users/dimus/orgs","repos_url":"https://api.github.com/users/dimus/repos","events_url":"https://api.github.com/users/dimus/events{/privacy}","received_events_url":"https://api.github.com/users/dimus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T16:59:45Z","updated_at":"2022-09-13T16:59:45Z","body":"> Another option is to create an explicit list of common typos (I believe some taxonomic name authorities have them already), and and apply those corrections. In this way, you have more control over exactly what name you'd like to re-interpret and who made the claim that X was a misspelling of Y.\r\n\r\n@jhpoelen, I think this approach does have a value when comparing names that were copied/pasted from one database to another. Sadly it is not always the case, especially when getting names from OCR or typed manually.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245690977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245787222","html_url":"https://github.com/globalbioticinteractions/nomer/issues/105#issuecomment-1245787222","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/105","id":1245787222,"node_id":"IC_kwDOBvmSqc5KQTRW","user":{"login":"jtmiller28","id":82229873,"node_id":"MDQ6VXNlcjgyMjI5ODcz","avatar_url":"https://avatars.githubusercontent.com/u/82229873?v=4","gravatar_id":"","url":"https://api.github.com/users/jtmiller28","html_url":"https://github.com/jtmiller28","followers_url":"https://api.github.com/users/jtmiller28/followers","following_url":"https://api.github.com/users/jtmiller28/following{/other_user}","gists_url":"https://api.github.com/users/jtmiller28/gists{/gist_id}","starred_url":"https://api.github.com/users/jtmiller28/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtmiller28/subscriptions","organizations_url":"https://api.github.com/users/jtmiller28/orgs","repos_url":"https://api.github.com/users/jtmiller28/repos","events_url":"https://api.github.com/users/jtmiller28/events{/privacy}","received_events_url":"https://api.github.com/users/jtmiller28/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T18:16:53Z","updated_at":"2022-09-13T18:16:53Z","body":"Yep seems I am rehashing issues #68 and #78, I think a similar_to matchcase as you illustrated would be a great asset for large heterogeneous in origin datasets. Methodology wise does seem problematic as pointed out by dimus in issue #68. I like the idea of listed misspellings as the primary implementation personally since that seems the most conservative. Would it be possible to enable multiple fuzzy matching schemes during the command line process? Where you could elect to use a known misspellings query (fuzzy_match1) or/and a character distance query (fuzzy_match2)? This way the user could choose a to enable a matching type. From a data analysis point of view I feel like the known misspellings could cut out alot of problematic names, while the fuzzy match through character distance may just increase them.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1245787222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]