{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/199","repository_url":"https://api.github.com/repos/globalbioticinteractions/nomer","labels_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/199/labels{/name}","comments_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/199/comments","events_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/199/events","html_url":"https://github.com/globalbioticinteractions/nomer/issues/199","id":2967003974,"node_id":"I_kwDOBvmSqc6w2ONG","number":199,"title":"Using multiple matchers","user":{"login":"zedomel","id":7684564,"node_id":"MDQ6VXNlcjc2ODQ1NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/7684564?v=4","gravatar_id":"","url":"https://api.github.com/users/zedomel","html_url":"https://github.com/zedomel","followers_url":"https://api.github.com/users/zedomel/followers","following_url":"https://api.github.com/users/zedomel/following{/other_user}","gists_url":"https://api.github.com/users/zedomel/gists{/gist_id}","starred_url":"https://api.github.com/users/zedomel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zedomel/subscriptions","organizations_url":"https://api.github.com/users/zedomel/orgs","repos_url":"https://api.github.com/users/zedomel/repos","events_url":"https://api.github.com/users/zedomel/events{/privacy}","received_events_url":"https://api.github.com/users/zedomel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2025-04-02T16:47:23Z","updated_at":"2025-04-02T16:50:55Z","closed_at":"2025-04-02T16:50:53Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi @jhpoelen \n\nI tried to execute `nomer` with multiple matches:\n```bash\necho -e \"\\tHomo sapiens\" | nomer append col gbif\n\tHomo sapiens\tHAS_ACCEPTED_NAME\tCOL:6MB3T\tHomo sapiens\tLinnaeus, 1758\tspecies\t\tBiota | Animalia | Chordata | Vertebrata | Gnathostomata | Osteichthyes | Sarcopterygii | Tetrapoda | Amniota | Mammalia | Theria | Eutheria | Primates | Haplorrhini | Simiiformes | Hominoidea | Hominidae | Homininae | Homo | Homo sapiens\tCOL:5T6MX | COL:N | COL:CH2 | COL:8V4V3 | COL:8V4V5 | COL:8VVWB | COL:8VSMX | COL:9CK8W | COL:8VLBH | COL:6224G | COL:924GT | COL:LG | COL:8ZXYB | COL:4DT | COL:4PM | COL:58L | COL:6256T | COL:JPH | COL:636X2 | COL:6MB3T\tunranked | kingdom | phylum | subphylum | infraphylum | parvphylum | gigaclass | megaclass | superclass | class | subclass | infraclass | order | suborder | infraorder | superfamily | family | subfamily | genus | species\t|  |  |  |  |  |  |  |  | Linnaeus, 1758 | Parker & Haswell, 1897 | Gill, 1872 | Linnaeus, 1758 | Pocock, 1918 | Haeckel, 1866 | Gray, 1825 | Gray, 1825 | Gray, 1825 | Linnaeus, 1758 | Linnaeus, 1758\thttps://www.catalogueoflife.org/data/taxon/6MB3T\n```\n\nIf I changed the order:\n```bash\necho -e \"\\tHomo sapiens\" | nomer append gbif col\n\tHomo sapiens\tHAS_ACCEPTED_NAME\tGBIF:2436436\tHomo sapiens\tLinnaeus, 1758\tspecies\t\tAnimalia | Chordata | Mammalia | Primates | Hominidae | Homo | Homo sapiens\tGBIF:1 | GBIF:44 | GBIF:359 | GBIF:798 | GBIF:5483 | GBIF:2436435 | GBIF:2436436\tkingdom | phylum | class | order | family | genus | species\t|  |  |  |  | Linnaeus, 1758 | Linnaeus, 1758http://www.gbif.org/species/2436436\n```\n\n\nBut it uses only the first matchers in the parameters, as we can see at [https://github.com/globalbioticinteractions/nomer/blob/8989bb63fe9eb2d4cdb55036349ad857a84670a3/nomer/src/main/java/org/globalbioticinteractions/nomer/match/MatchUtil.java#L63](https://github.com/globalbioticinteractions/nomer/blob/8989bb63fe9eb2d4cdb55036349ad857a84670a3/nomer/src/main/java/org/globalbioticinteractions/nomer/match/MatchUtil.java#L63)\n\nSo, I created a new `TermMatcher` class called `MultipleTermMatcher` that is just a wrapper around `TermMatcher.match()` method.\n\nNow I can do:\n```bash\necho -e \"\\tHomo sapiens\" | nomer append col gbif\n\tHomo sapiens\tHAS_ACCEPTED_NAME\tCOL:6MB3T\tHomo sapiens\tLinnaeus, 1758\tspecies\t\tBiota | Animalia | Chordata | Vertebrata | Gnathostomata | Osteichthyes | Sarcopterygii | Tetrapoda | Amniota | Mammalia | Theria | Eutheria | Primates | Haplorrhini | Simiiformes | Hominoidea | Hominidae | Homininae | Homo | Homo sapiens\tCOL:5T6MX | COL:N | COL:CH2 | COL:8V4V3 | COL:8V4V5 | COL:8VVWB | COL:8VSMX | COL:9CK8W | COL:8VLBH | COL:6224G | COL:924GT | COL:LG | COL:8ZXYB | COL:4DT | COL:4PM | COL:58L | COL:6256T | COL:JPH | COL:636X2 | COL:6MB3T\tunranked | kingdom | phylum | subphylum | infraphylum | parvphylum | gigaclass | megaclass | superclass | class | subclass | infraclass | order | suborder | infraorder | superfamily | family | subfamily | genus | species\t|  |  |  |  |  |  |  |  | Linnaeus, 1758 | Parker & Haswell, 1897 | Gill, 1872 | Linnaeus, 1758 | Pocock, 1918 | Haeckel, 1866 | Gray, 1825 | Gray, 1825 | Gray, 1825 | Linnaeus, 1758 | Linnaeus, 1758\thttps://www.catalogueoflife.org/data/taxon/6MB3T\n\tHomo sapiens\tHAS_ACCEPTED_NAME\tGBIF:2436436\tHomo sapiens\tLinnaeus, 1758\tspecies\t\tAnimalia | Chordata | Mammalia | Primates | Hominidae | Homo | Homo sapiens\tGBIF:1 | GBIF:44 | GBIF:359 | GBIF:798 | GBIF:5483 | GBIF:2436435 | GBIF:2436436\tkingdom | phylum | class | order | family | genus | species\t|  |  |  |  | Linnaeus, 1758 | Linnaeus, 1758http://www.gbif.org/species/2436436\n```\n\nI did a pull request [https://github.com/globalbioticinteractions/nomer/pull/198#issue-2967000124](https://github.com/globalbioticinteractions/nomer/pull/198#issue-2967000124). Please, modify it as you wish. \n\nThank you.","closed_by":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/199/timeline","performed_via_github_app":null,"state_reason":"completed"}