[{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/985750857","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-985750857","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":985750857,"node_id":"IC_kwDOBvmSqc46wV1J","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T18:51:45Z","updated_at":"2021-12-03T19:10:09Z","body":"@joelnitta Thanks for opening this issue on fuzzy matching features in Nomer. \r\n\r\nCurrently, Nomer support fuzzy matching to a web-api integration with globalnames:\r\n\r\n```\r\n$ echo -e \"\\tHomo sapients\" | nomer append globalnames\r\n[main] INFO org.globalbioticinteractions.nomer.match.TermMatcherRegistry - using matcher [globi-globalnames]\r\n\tHomo sapients\tSIMILAR_TO\tITIS:180092\tHomo sapiens\tSpecies\t\tAnimalia | Bilateria | Deuterostomia | Chordata | Vertebrata | Gnathostomata | Tetrapoda | Mammalia | Theria | Eutheria | Primates | Haplorrhini | Simiiformes | Hominoidea | Hominidae | Homininae | Homo | Homo sapiens\tITIS:202423 | ITIS:914154 | ITIS:914156 | ITIS:158852 | ITIS:331030 | ITIS:914179 | ITIS:914181 | ITIS:179913 | ITIS:179916 | ITIS:179925 | ITIS:180089 | ITIS:943773 | ITIS:943778 | ITIS:943782 | ITIS:180090 | ITIS:943805 | ITIS:180091 | ITIS:180092\tKingdom | Subkingdom | Infrakingdom | Phylum | Subphylum | Infraphylum | Superclass | Class | Subclass | Infraclass | Order | Suborder | Infraorder | Superfamily | Family | Subfamily | Genus | Species\thttp://www.itis.gov/servlet/SingleRpt/SingleRpt?search_topic=TSN&search_value=180092\t\r\n\tHomo sapients\tSIMILAR_TO\tNCBI:9606\tHomo sapiens\tspecies\t\t| Eukaryota | Opisthokonta | Metazoa | Eumetazoa | Bilateria | Deuterostomia | Chordata | Craniata | Vertebrata | Gnathostomata | Teleostomi | Euteleostomi | Sarcopterygii | Dipnotetrapodomorpha | Tetrapoda | Amniota | Mammalia | Theria | Eutheria | Boreoeutheria | Euarchontoglires | Primates | Haplorrhini | Simiiformes | Catarrhini | Hominoidea | Hominidae | Homininae | Homo | Homo sapiens\tNCBI:131567 | NCBI:2759 | NCBI:33154 | NCBI:33208 | NCBI:6072 | NCBI:33213 | NCBI:33511 | NCBI:7711 | NCBI:89593 | NCBI:7742 | NCBI:7776 | NCBI:117570 | NCBI:117571 | NCBI:8287 | NCBI:1338369 | NCBI:32523 | NCBI:32524 | NCBI:40674 | NCBI:32525 | NCBI:9347 | NCBI:1437010 | NCBI:314146 | NCBI:9443 | NCBI:376913 | NCBI:314293 | NCBI:9526 | NCBI:314295 | NCBI:9604 | NCBI:207598 | NCBI:9605 | NCBI:9606\t| superkingdom | clade | kingdom | clade | clade | clade | phylum | subphylum | clade | clade | clade | clade | superclass | clade | clade | clade | class | clade | clade | clade | superorder | order | suborder | infraorder | parvorder | superfamily | family | subfamily | genus | specieshttps://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?id=9606\t\r\n\tHomo sapients\tSIMILAR_TO\tIRMNG:10857762\tHomo sapiens\tspecies\t\tAnimalia | Chordata | Mammalia | Primates | Hominidae | Homo | Homo sapiens\tIRMNG:11 | IRMNG:148 | IRMNG:1310 | IRMNG:11338 | IRMNG:104701 | IRMNG:1035772 | IRMNG:10857762\tkingdom | phylum | class | order | family | genus | species\thttps://www.irmng.org/aphia.php?p=taxdetails&id=10857762\t\r\n\tHomo sapients\tSIMILAR_TO\tWORMS:1455977\tHomo sapiens\tSpecies\t\tBiota | Animalia | Chordata | Vertebrata | Gnathostomata | Tetrapoda | Mammalia | Primates | Hominidae | Homo | Homo sapiens\tWORMS:1 | WORMS:2 | WORMS:1821 | WORMS:146419 | WORMS:1828 | WORMS:1831 | WORMS:1837 | WORMS:1455974 | WORMS:1455975 | WORMS:1455976 | WORMS:1455977\t| Kingdom | Phylum | Subphylum | Infraphylum | Superclass | Class | Order | Family | Genus | Species\thttps://www.marinespecies.org/aphia.php?p=taxdetails&id=1455977\t\r\n\tHomo sapients\tSIMILAR_TO\tGBIF:2436436\tHomo sapiens\tspecies\t\tAnimalia | Chordata | Mammalia | Primates | Hominidae | Homo | Homo sapiens\tGBIF:1 | GBIF:44 | GBIF:359 | GBIF:798 | GBIF:5483 | GBIF:2436435 | GBIF:2436436\tkingdom | phylum | class | order | family | genus | species\thttp://www.gbif.org/species/2436436\t\r\n\tHomo sapients\tSIMILAR_TO\tOTT:770315\tHomo sapiens\tspecies\t\t|  | Eukaryota | Opisthokonta | Holozoa | Metazoa | Eumetazoa | Bilateria | Deuterostomia | Chordata | Craniata | Vertebrata | Gnathostomata | Teleostomi | Euteleostomi | Sarcopterygii | Dipnotetrapodomorpha | Tetrapoda | Amniota | Mammalia | Theria | Eutheria | Boreoeutheria | Euarchontoglires | Primates | Haplorrhini | Simiiformes | Catarrhini | Hominoidea | Hominidae | Homininae | Homo | Homo sapiens\tOTT:805080 | OTT:93302 | OTT:304358 | OTT:332573 | OTT:5246131 | OTT:691846 | OTT:641038 | OTT:117569 | OTT:147604 | OTT:125642 | OTT:947318 | OTT:801601 | OTT:278114 | OTT:114656 | OTT:114654 | OTT:458402 | OTT:4940726 | OTT:229562 | OTT:229560 | OTT:244265 | OTT:229558 | OTT:683263 | OTT:5334778 | OTT:392222 | OTT:913935 | OTT:702152 | OTT:386195 | OTT:842867 | OTT:386191 | OTT:770311 | OTT:312031 | OTT:770309 | OTT:770315\tno rank | no rank | domain | no rank | no rank | kingdom | no rank | no rank | no rank | phylum | subphylum | subphylum | superclass | no rank | no rank | superclass | no rank | superclass | no rank | class | subclass | no rank | no rank | superorder | order | suborder | infraorder | parvorder | superfamily | family | subfamily | genus | specieshttps://tree.opentreeoflife.org/opentree/ottol@770315\t\r\n```\r\n\r\nAnd, as you probably suspect, the Nomer's ```globalnames``` matcher relies on the globalnames resolver's web api. \r\n\r\nOffline enabled matchers like ```itis```, ```ncbi``` etc. currently do exact matches only. \r\n\r\nAnd, I've heard many others ask for fuzzy matching requests. \r\n\r\nHow do you imagine using a fuzzy matching functionality? Which fuzzy matching algorithms would you imagine using? How would you want to quantify the relation between the fuzzy match and the provided terms? \r\n\r\nCurious to hear your thoughts! And, a detailed example of what you had in mind helps me better understand your desires.\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/985750857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/985881840","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-985881840","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":985881840,"node_id":"IC_kwDOBvmSqc46w1zw","user":{"login":"joelnitta","id":13459362,"node_id":"MDQ6VXNlcjEzNDU5MzYy","avatar_url":"https://avatars.githubusercontent.com/u/13459362?v=4","gravatar_id":"","url":"https://api.github.com/users/joelnitta","html_url":"https://github.com/joelnitta","followers_url":"https://api.github.com/users/joelnitta/followers","following_url":"https://api.github.com/users/joelnitta/following{/other_user}","gists_url":"https://api.github.com/users/joelnitta/gists{/gist_id}","starred_url":"https://api.github.com/users/joelnitta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joelnitta/subscriptions","organizations_url":"https://api.github.com/users/joelnitta/orgs","repos_url":"https://api.github.com/users/joelnitta/repos","events_url":"https://api.github.com/users/joelnitta/events{/privacy}","received_events_url":"https://api.github.com/users/joelnitta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T22:21:02Z","updated_at":"2021-12-03T22:21:02Z","body":"Thanks for the quick reply, I'm glad you're interested in this topic.\r\n\r\n> How do you imagine using a fuzzy matching functionality? \r\n\r\n(see example below)\r\n\r\n> Which fuzzy matching algorithms would you imagine using? \r\n\r\nSome thing that is designed to work with scientific names, like [gnames](https://github.com/gnames/gnames). It would be great if it could account for the typically lower variation in species name (Genus + specific epithet) as opposed to much greater variation in taxonomic author name. For example, if the accepted name is `Foogenus barspecies (Foo B.) Barbar`, typical variations might include\r\n- `Foogenus barspecies Barbar` (large variation in author name in terms of number of characters)\r\n- `Foogenus barspecis (Foo B.) Barbar`(small variation in species name)\r\nBut **not**\r\n- `Foogenus bawhathetheckhappened (Foo B.) Barbar` (large variation in species name, identical author)\r\n\r\n> How would you want to quantify the relation between the fuzzy match and the provided terms?\r\n\r\nSome sort of string distance metric, eg, methods [here](https://www.rdocumentation.org/packages/stringdist/versions/0.9.8/topics/stringdist)? I haven't thought about that too much, TBH.\r\n\r\n## Detailed example\r\n\r\nI want to be able to query a set of names against a **custom**, **local** (cached) reference taxonomy that adheres to [Darwin Core standards](https://dwc.tdwg.org/terms/#taxon). I want to be able to match the query fuzzily, especially because of variation in taxonomic author names. \r\n\r\nI am developing an R package to do this ([taxastand](https://github.com/joelnitta/taxastand)), but rather than (re)write all of the fuzzy matching code in R, I am calling outside programs because others have already figured out how to do that. Currently, I am using [taxon-tools](https://github.com/camwebb/taxon-tools), but I am looking for other options as well (hence looking into gnames).\r\n\r\nPseudocode \r\n- input: (`ref_taxonomy.csv` would be a CSV file of reference taxonomic names following Darwin Core format. e.g., [this](https://gist.github.com/joelnitta/05eb3157656458a6e4f5615855a38dd7))\r\n\r\n```\r\nmatch --input \"/tGonocormus minutum Bosch\" --ref \"ref_taxonomy.csv\"\r\n```\r\n\r\n- output (would be tsv, but you get the idea)\r\n\r\n|query | matched_name | matched_status  | match_type|\r\n|---|---|---|---|\r\n|Gonocormus minutum  |  Gonocormus minutus (Bl.) Bosch  |  synonym | fuzzy|\r\n\r\nI hope that clarifies things somewhat!\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/985881840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/985901491","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-985901491","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":985901491,"node_id":"IC_kwDOBvmSqc46w6mz","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T23:08:46Z","updated_at":"2021-12-03T23:08:46Z","body":"Thanks for the detailed example. \r\n\r\nI associate fuzzy matching with associating typos with known names. . . and I can see how taxonomic name parsing can be included in that. \r\n\r\nNomer incorporates an older version of @dimus gnames parser . This is used in the ```globi-correct``` matcher. \r\n\r\nE.g., \r\n\r\n```\r\n echo -e \"\\tFoogenus barspecies Barbar, 1974\" | nomer append globi-correct\r\n...\r\n\tFoogenus barspecies Barbar, 1974\tSAME_AS\t\tFoogenus barspecies\t\t\t\t\r\n```\r\n\r\nand \r\n\r\n```\r\necho -e \"\\tFoogenus barspecis (Foo B.) Barbar\" | nomer append globi-correct\r\n...\r\n\tFoogenus barspecis (Foo B.) Barbar\tSAME_AS\t\tFoogenus barspecis\t\t\t\t\r\n```\r\n\r\nand \r\n\r\n```\r\n$ echo -e '\\tFoogenus bawhathetheckhappened (Foo B.) Barbar' | nomer append globi-correct\r\n\tFoogenus bawhathetheckhappened (Foo B.) Barbar\tSAME_AS\t\tFoogenus bawhathetheckhappened\t\t\r\n```\r\n\r\nafter this attempt to extract the canonical name from some string, comparing becomes a little easier. \r\n\r\nNote, however, that the relation \"SAME_AS\" should really be \"HAS_CANONICAL_NAME\" or similar. Also, note that there no similarity metric based on overlapping elements in the name (same author, same genus, different epithet). \r\n\r\nI wondering how you'd imagine extending the functionality to include the comparisons you hint to .\r\n\r\n\r\n ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/985901491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/985942758","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-985942758","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":985942758,"node_id":"IC_kwDOBvmSqc46xErm","user":{"login":"joelnitta","id":13459362,"node_id":"MDQ6VXNlcjEzNDU5MzYy","avatar_url":"https://avatars.githubusercontent.com/u/13459362?v=4","gravatar_id":"","url":"https://api.github.com/users/joelnitta","html_url":"https://github.com/joelnitta","followers_url":"https://api.github.com/users/joelnitta/followers","following_url":"https://api.github.com/users/joelnitta/following{/other_user}","gists_url":"https://api.github.com/users/joelnitta/gists{/gist_id}","starred_url":"https://api.github.com/users/joelnitta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joelnitta/subscriptions","organizations_url":"https://api.github.com/users/joelnitta/orgs","repos_url":"https://api.github.com/users/joelnitta/repos","events_url":"https://api.github.com/users/joelnitta/events{/privacy}","received_events_url":"https://api.github.com/users/joelnitta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T01:41:50Z","updated_at":"2021-12-04T01:41:50Z","body":"It looks like globi-correct is parsing the name (using gnparser, probably?) and returning the canonical form. As you say, that would be involved in fuzzy matching that takes into account scientific name parts, but parsing alone doesn’t solve what I’m trying to do.\r\n\r\nAnother way to say it is that I’m happy with the fuzzy matching capabilities of gnames. What I want to do is decouple the fuzzy matching from the database selection. Currently in gnames you are limited to choosing from existing online databases. I want to be able to provide a local, custom database (and assume the easiest way to do so is if it is DWC format). Sorry if that wasn’t clear from the example.\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/985942758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986051695","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-986051695","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":986051695,"node_id":"IC_kwDOBvmSqc46xfRv","user":{"login":"dimus","id":12124,"node_id":"MDQ6VXNlcjEyMTI0","avatar_url":"https://avatars.githubusercontent.com/u/12124?v=4","gravatar_id":"","url":"https://api.github.com/users/dimus","html_url":"https://github.com/dimus","followers_url":"https://api.github.com/users/dimus/followers","following_url":"https://api.github.com/users/dimus/following{/other_user}","gists_url":"https://api.github.com/users/dimus/gists{/gist_id}","starred_url":"https://api.github.com/users/dimus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimus/subscriptions","organizations_url":"https://api.github.com/users/dimus/orgs","repos_url":"https://api.github.com/users/dimus/repos","events_url":"https://api.github.com/users/dimus/events{/privacy}","received_events_url":"https://api.github.com/users/dimus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T16:11:23Z","updated_at":"2021-12-04T16:12:40Z","body":"From my trial and error, fuzzy matching stops being useful at some point,  generating too many false positives.\r\n\r\nSo my current approach to fuzzy matching is:\r\n1. No fuzzy matching for uninomial alone\r\n2. No fuzzy matching for words less than 5 characters\r\n3. Allow edit distance 1 on a stemmed part of a name.\r\n\r\nin general I use stemmed versions for all matching, and calculate edit distance after a fuzzy match is done.\r\n\r\nFuzzy matching is useful, because errors in names happen quite often during OCR or data input.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986051695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986052653","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-986052653","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":986052653,"node_id":"IC_kwDOBvmSqc46xfgt","user":{"login":"dimus","id":12124,"node_id":"MDQ6VXNlcjEyMTI0","avatar_url":"https://avatars.githubusercontent.com/u/12124?v=4","gravatar_id":"","url":"https://api.github.com/users/dimus","html_url":"https://github.com/dimus","followers_url":"https://api.github.com/users/dimus/followers","following_url":"https://api.github.com/users/dimus/following{/other_user}","gists_url":"https://api.github.com/users/dimus/gists{/gist_id}","starred_url":"https://api.github.com/users/dimus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimus/subscriptions","organizations_url":"https://api.github.com/users/dimus/orgs","repos_url":"https://api.github.com/users/dimus/repos","events_url":"https://api.github.com/users/dimus/events{/privacy}","received_events_url":"https://api.github.com/users/dimus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T16:18:14Z","updated_at":"2021-12-04T16:18:14Z","body":"> Nomer incorporates an older version of @dimus gnames parser . \r\n\r\nGo version of gnparser moved forward quite a bit compare to old Scalla version.\\\r\n\r\n@jhpoelen, would you be adventurous enough to use clib bidnings of Go parser to make binding for Java via ffi? and release Java version of it like there is [Ruby](https://github.com/GlobalNamesArchitecture/biodiversity) and [Java Script](https://github.com/amazingplants/node-gnparser) versions?\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986052653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986165481","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-986165481","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":986165481,"node_id":"IC_kwDOBvmSqc46x7Dp","user":{"login":"joelnitta","id":13459362,"node_id":"MDQ6VXNlcjEzNDU5MzYy","avatar_url":"https://avatars.githubusercontent.com/u/13459362?v=4","gravatar_id":"","url":"https://api.github.com/users/joelnitta","html_url":"https://github.com/joelnitta","followers_url":"https://api.github.com/users/joelnitta/followers","following_url":"https://api.github.com/users/joelnitta/following{/other_user}","gists_url":"https://api.github.com/users/joelnitta/gists{/gist_id}","starred_url":"https://api.github.com/users/joelnitta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joelnitta/subscriptions","organizations_url":"https://api.github.com/users/joelnitta/orgs","repos_url":"https://api.github.com/users/joelnitta/repos","events_url":"https://api.github.com/users/joelnitta/events{/privacy}","received_events_url":"https://api.github.com/users/joelnitta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-05T04:40:01Z","updated_at":"2021-12-05T04:40:01Z","body":"I agree with @dimus that fuzzy matching will almost always end up with some amount of false positives, if the query set is large enough. Whatever cutoff you set will not work for everything. So it is important to check the fuzzily matched results.\r\n\r\nTo expand a bit more about why fuzzy matching is useful, here are some examples \"in the wild\". As I alluded to above, I think fuzzy matching is most important for matching author names, which can have a lot of variation. Author names are needed because the same Genus + specific epithet may refer to different entities according to different authors. For example,\r\n\r\n`Trichomanes bifidum`:\r\n- `Trichomanes bifidum C. Presl` is a synonym for [Trichomanes idoneum C. V. Morton](https://powo.science.kew.org/taxon/urn:lsid:ipni.org:names:17463530-1)\r\n- `Trichomanes bifidum Willd` is a synonym for [Trichomanes rigidum Sw](https://powo.science.kew.org/taxon/urn:lsid:ipni.org:names:17228040-1)\r\n\r\nSo we need author names to correctly resolve taxa.\r\n\r\nOne example of author names having a lot variation, even in \"standard\" taxonomic databases. For example the same name appears as:\r\n- `Cephalomanes auriculatum (Blume) Bosch` in [tropicos](https://www.tropicos.org/name/26612374)\r\n- `Cephalmonaes auriculatum Bosch` in [IPNI](https://www.ipni.org/?f=f_specific&q=genus%3ACephalomanes%2Cspecies%3Aauriculatum)\r\n\r\nSo we need fuzzy matching (and/or some sort of scientific name-aware parsing) to match these.\r\n\r\nIf this is all outside the scope of nomer, that's fine. It wasn't entirely clear to me if fuzzy matching is something nomer is trying to do.\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986165481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986206093","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-986206093","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":986206093,"node_id":"IC_kwDOBvmSqc46yE-N","user":{"login":"dimus","id":12124,"node_id":"MDQ6VXNlcjEyMTI0","avatar_url":"https://avatars.githubusercontent.com/u/12124?v=4","gravatar_id":"","url":"https://api.github.com/users/dimus","html_url":"https://github.com/dimus","followers_url":"https://api.github.com/users/dimus/followers","following_url":"https://api.github.com/users/dimus/following{/other_user}","gists_url":"https://api.github.com/users/dimus/gists{/gist_id}","starred_url":"https://api.github.com/users/dimus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimus/subscriptions","organizations_url":"https://api.github.com/users/dimus/orgs","repos_url":"https://api.github.com/users/dimus/repos","events_url":"https://api.github.com/users/dimus/events{/privacy}","received_events_url":"https://api.github.com/users/dimus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-05T10:42:09Z","updated_at":"2021-12-05T10:42:09Z","body":"@joelnitta I wonder if https://apidoc.globalnames.org/gnmatcher might help you with matching 'local' datasets. See also https://github.com/gnames/gnmatcher/issues/39","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986206093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986207085","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-986207085","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":986207085,"node_id":"IC_kwDOBvmSqc46yFNt","user":{"login":"dimus","id":12124,"node_id":"MDQ6VXNlcjEyMTI0","avatar_url":"https://avatars.githubusercontent.com/u/12124?v=4","gravatar_id":"","url":"https://api.github.com/users/dimus","html_url":"https://github.com/dimus","followers_url":"https://api.github.com/users/dimus/followers","following_url":"https://api.github.com/users/dimus/following{/other_user}","gists_url":"https://api.github.com/users/dimus/gists{/gist_id}","starred_url":"https://api.github.com/users/dimus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimus/subscriptions","organizations_url":"https://api.github.com/users/dimus/orgs","repos_url":"https://api.github.com/users/dimus/repos","events_url":"https://api.github.com/users/dimus/events{/privacy}","received_events_url":"https://api.github.com/users/dimus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-05T10:50:02Z","updated_at":"2021-12-05T10:50:02Z","body":"@joelnitta, I would say authors are beyond the scope of fuzzy matching. Variety in authors is such, that fuzzy matching would create huge amount of false positives if we try to tackle in on this level. I use modifications of algorithm developed by @pleary for uBio to score results by authors similarity and sort resuls by that score. \r\n\r\nAlso freshly developed faceted search https://apidoc.globalnames.org/gnames-beta might help in some hard situations with authors.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986207085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986218831","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-986218831","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":986218831,"node_id":"IC_kwDOBvmSqc46yIFP","user":{"login":"joelnitta","id":13459362,"node_id":"MDQ6VXNlcjEzNDU5MzYy","avatar_url":"https://avatars.githubusercontent.com/u/13459362?v=4","gravatar_id":"","url":"https://api.github.com/users/joelnitta","html_url":"https://github.com/joelnitta","followers_url":"https://api.github.com/users/joelnitta/followers","following_url":"https://api.github.com/users/joelnitta/following{/other_user}","gists_url":"https://api.github.com/users/joelnitta/gists{/gist_id}","starred_url":"https://api.github.com/users/joelnitta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joelnitta/subscriptions","organizations_url":"https://api.github.com/users/joelnitta/orgs","repos_url":"https://api.github.com/users/joelnitta/repos","events_url":"https://api.github.com/users/joelnitta/events{/privacy}","received_events_url":"https://api.github.com/users/joelnitta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-05T12:10:52Z","updated_at":"2021-12-05T12:10:52Z","body":"@dimus [gnames/gnmatcher#39](https://github.com/gnames/gnmatcher/issues/39) is essentially the same thing I want to do. Thanks for linking that issue. Sounds like it is a distant possibility, but nothing I should expect soon. I had a look at https://apidoc.globalnames.org/gnmatcher and https://apidoc.globalnames.org/gnames-beta but as they both apparently require use of online reference databases, I don't think they will help achieve what I'm trying to do.\r\n\r\nRE: fuzzy matching of author names. I think the approach taken by [taxon-tools](https://github.com/camwebb/taxon-tools), which applies \"taxonomic logic\" besides just pure string distances, can help get at this. So for the example I gave above, if `Cephalomanes auriculatum (Blume) Bosch` is the query and `Cephalmonaes auriculatum Bosch` is the reference, it would match by `auto_basio+` (identical after removing basionym author from query).","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986218831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986226737","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-986226737","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":986226737,"node_id":"IC_kwDOBvmSqc46yKAx","user":{"login":"dimus","id":12124,"node_id":"MDQ6VXNlcjEyMTI0","avatar_url":"https://avatars.githubusercontent.com/u/12124?v=4","gravatar_id":"","url":"https://api.github.com/users/dimus","html_url":"https://github.com/dimus","followers_url":"https://api.github.com/users/dimus/followers","following_url":"https://api.github.com/users/dimus/following{/other_user}","gists_url":"https://api.github.com/users/dimus/gists{/gist_id}","starred_url":"https://api.github.com/users/dimus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimus/subscriptions","organizations_url":"https://api.github.com/users/dimus/orgs","repos_url":"https://api.github.com/users/dimus/repos","events_url":"https://api.github.com/users/dimus/events{/privacy}","received_events_url":"https://api.github.com/users/dimus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-05T13:04:33Z","updated_at":"2021-12-05T13:12:26Z","body":"@joelnitta, may be @camwebb taxon-tools would cover your and @abubelinha usecase?\r\n\r\nAnother possible solution is to extract matching algorithms of `gnmatcher` and `gnames` into some separate offline project called `gndiff` for example :)\r\n\r\nSomething like `gndiff names1.txt names2.txt > diff.txt` with an optional online name verification ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986226737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986340813","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-986340813","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":986340813,"node_id":"IC_kwDOBvmSqc46yl3N","user":{"login":"joelnitta","id":13459362,"node_id":"MDQ6VXNlcjEzNDU5MzYy","avatar_url":"https://avatars.githubusercontent.com/u/13459362?v=4","gravatar_id":"","url":"https://api.github.com/users/joelnitta","html_url":"https://github.com/joelnitta","followers_url":"https://api.github.com/users/joelnitta/followers","following_url":"https://api.github.com/users/joelnitta/following{/other_user}","gists_url":"https://api.github.com/users/joelnitta/gists{/gist_id}","starred_url":"https://api.github.com/users/joelnitta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joelnitta/subscriptions","organizations_url":"https://api.github.com/users/joelnitta/orgs","repos_url":"https://api.github.com/users/joelnitta/repos","events_url":"https://api.github.com/users/joelnitta/events{/privacy}","received_events_url":"https://api.github.com/users/joelnitta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-06T00:44:56Z","updated_at":"2021-12-06T00:46:17Z","body":"> may be @camwebb taxon-tools would cover your and @abubelinha usecase?\r\n\r\nYes, that's why [I'm using it](https://github.com/joelnitta/taxastand#dependencies), as I mentioned in gnames [issue 22](https://github.com/gnames/gnames/issues/22#issuecomment-985306063) :)\r\n\r\nThe reason I'm interested in `gnames` for this is that `taxon-tools` is designed based on the rules of botanical nomenclature, so it may not work as well as a general tool. Also, I think `gnames` might be faster (but have not conducted any benchmarks). I would like to be able to offer the matching capabilities of either `gnames` or `taxon-tools` in my [`taxastand` R package](https://github.com/joelnitta/taxastand).\r\n\r\nThat said, the `gndiff` idea you propose sounds great. I don't understand enough about how `gnames` works, but if the fuzzy matching algorithm could be easily split off into an offline CLI , that would be perfect.\r\n\r\n(@jhpoelen apologies if this discussion is drifting completely out of the scope of nomer... I hope it's useful for you though!)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986340813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986353995","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-986353995","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":986353995,"node_id":"IC_kwDOBvmSqc46ypFL","user":{"login":"dimus","id":12124,"node_id":"MDQ6VXNlcjEyMTI0","avatar_url":"https://avatars.githubusercontent.com/u/12124?v=4","gravatar_id":"","url":"https://api.github.com/users/dimus","html_url":"https://github.com/dimus","followers_url":"https://api.github.com/users/dimus/followers","following_url":"https://api.github.com/users/dimus/following{/other_user}","gists_url":"https://api.github.com/users/dimus/gists{/gist_id}","starred_url":"https://api.github.com/users/dimus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimus/subscriptions","organizations_url":"https://api.github.com/users/dimus/orgs","repos_url":"https://api.github.com/users/dimus/repos","events_url":"https://api.github.com/users/dimus/events{/privacy}","received_events_url":"https://api.github.com/users/dimus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-06T01:16:22Z","updated_at":"2021-12-06T01:16:22Z","body":"as the conversation is mostly abot [gnames #22](https://github.com/gnames/gnames/issues/22#issuecomment-985306063) \r\nI'll continue this part of discussion there.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/986353995/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1164502902","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-1164502902","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":1164502902,"node_id":"IC_kwDOBvmSqc5FaOd2","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-23T14:46:51Z","updated_at":"2022-06-23T14:46:51Z","body":"duplicate of related #78 ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1164502902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1164503664","html_url":"https://github.com/globalbioticinteractions/nomer/issues/68#issuecomment-1164503664","issue_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/68","id":1164503664,"node_id":"IC_kwDOBvmSqc5FaOpw","user":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-23T14:47:26Z","updated_at":"2022-06-23T14:47:26Z","body":"@joelnitta thanks for being patient as we are figuring this out. @zedomel also requested a similar feature in #78 . ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/comments/1164503664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]