{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/129","repository_url":"https://api.github.com/repos/globalbioticinteractions/nomer","labels_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/129/labels{/name}","comments_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/129/comments","events_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/129/events","html_url":"https://github.com/globalbioticinteractions/nomer/issues/129","id":1456705709,"node_id":"I_kwDOBvmSqc5W05Ct","number":129,"title":"nomer 0.4.3 IOException when try to use globi-taxon-rank","user":{"login":"zedomel","id":7684564,"node_id":"MDQ6VXNlcjc2ODQ1NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/7684564?v=4","gravatar_id":"","url":"https://api.github.com/users/zedomel","html_url":"https://github.com/zedomel","followers_url":"https://api.github.com/users/zedomel/followers","following_url":"https://api.github.com/users/zedomel/following{/other_user}","gists_url":"https://api.github.com/users/zedomel/gists{/gist_id}","starred_url":"https://api.github.com/users/zedomel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zedomel/subscriptions","organizations_url":"https://api.github.com/users/zedomel/orgs","repos_url":"https://api.github.com/users/zedomel/repos","events_url":"https://api.github.com/users/zedomel/events{/privacy}","received_events_url":"https://api.github.com/users/zedomel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":801028348,"node_id":"MDU6TGFiZWw4MDEwMjgzNDg=","url":"https://api.github.com/repos/globalbioticinteractions/nomer/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Something isn't working"},{"id":801028351,"node_id":"MDU6TGFiZWw4MDEwMjgzNTE=","url":"https://api.github.com/repos/globalbioticinteractions/nomer/labels/help%20wanted","name":"help wanted","color":"33aa3f","default":true,"description":"Extra attention is needed"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-11-19T23:49:11Z","updated_at":"2022-11-22T04:22:15Z","closed_at":"2022-11-22T04:21:47Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi @jhpoelen \r\n\r\nI'm trying to use `globi-taxon-rank` `nomer`'s matcher (version `0.4.0`) following the `Makefile` of [taxon-graph-builder](https://github.com/globalbioticinteractions/taxon-graph-builder/blob/main/Makefile) but it is producing the follow expcetion:\r\n```java\r\n[main] INFO org.eol.globi.taxon.TaxonCacheService - local taxon cache of [file:/home/jose/.cache/nomer/wikidata_appended_taxon_ranks.tsv] building...\r\n[main] INFO org.globalbioticinteractions.nomer.match.ResourceServiceContentBased - using local Preston data dir: [/home/jose/.cache/nomer/data]\r\n[main] INFO org.globalbioticinteractions.nomer.match.ResourceServiceContentBased - caching [file:/home/jose/.cache/nomer/wikidata_appended_taxon_ranks.tsv] at [/home/jose/.cache/nomer/tmp/nomer3632987002351868295.gz]...\r\njava.io.IOException: problem retrieving [file:/home/jose/.cache/nomer/wikidata_appended_taxon_ranks.tsv]\r\n\tat bio.guoda.preston.cmd.ContentQueryUtil.handleContentQuery(ContentQueryUtil.java:35)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:63)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:42)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:37)\r\n\tat org.globalbioticinteractions.nomer.match.ResourceServiceContentBased.retrieve(ResourceServiceContentBased.java:83)\r\n\tat org.globalbioticinteractions.nomer.match.ResourceServiceFactoryImpl$1.retrieve(ResourceServiceFactoryImpl.java:40)\r\n\tat org.globalbioticinteractions.nomer.match.TermMatcherContextCaching.retrieve(TermMatcherContextCaching.java:16)\r\n\tat org.eol.globi.service.CacheServiceUtil.createBufferedReader(CacheServiceUtil.java:13)\r\n\tat org.eol.globi.taxon.TaxonCacheService$3.<init>(TaxonCacheService.java:314)\r\n\tat org.eol.globi.taxon.TaxonCacheService.taxonCacheIterator(TaxonCacheService.java:313)\r\n\tat org.eol.globi.taxon.TaxonCacheService.initTaxonCache(TaxonCacheService.java:232)\r\n\tat org.eol.globi.taxon.TaxonCacheService.init(TaxonCacheService.java:158)\r\n\tat org.eol.globi.taxon.TaxonCacheService.lazyInit(TaxonCacheService.java:152)\r\n\tat org.eol.globi.taxon.TaxonCacheService.match(TaxonCacheService.java:262)\r\n\tat org.eol.globi.service.TermMatcherHierarchical.match(TermMatcherHierarchical.java:57)\r\n\tat org.globalbioticinteractions.nomer.util.AppendingRowHandler.onRow(AppendingRowHandler.java:36)\r\n\tat org.globalbioticinteractions.nomer.match.MatchUtil.apply(MatchUtil.java:85)\r\n\tat org.globalbioticinteractions.nomer.match.MatchUtil.match(MatchUtil.java:37)\r\n\tat org.globalbioticinteractions.nomer.cmd.CmdAppend.run(CmdAppend.java:20)\r\n\tat picocli.CommandLine.executeUserObject(CommandLine.java:1939)\r\n\tat picocli.CommandLine.access$1300(CommandLine.java:145)\r\n\tat picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2352)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2314)\r\n\tat picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)\r\n\tat picocli.CommandLine$RunLast.execute(CommandLine.java:2316)\r\n\tat picocli.CommandLine.execute(CommandLine.java:2078)\r\n\tat org.globalbioticinteractions.nomer.Nomer.run(Nomer.java:57)\r\n\tat org.globalbioticinteractions.nomer.Nomer.main(Nomer.java:46)\r\nCaused by: java.io.IOException: [file:/home/jose/.cache/nomer/wikidata_appended_taxon_ranks.tsv] not found.\r\n\tat bio.guoda.preston.cmd.ContentQueryUtil.handleContentQuery(ContentQueryUtil.java:31)\r\n\t... 28 more\r\njava.lang.RuntimeException: java.io.IOException: problem retrieving [file:/home/jose/.cache/nomer/wikidata_appended_taxon_ranks.tsv]\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:45)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:37)\r\n\tat org.globalbioticinteractions.nomer.match.ResourceServiceContentBased.retrieve(ResourceServiceContentBased.java:83)\r\n\tat org.globalbioticinteractions.nomer.match.ResourceServiceFactoryImpl$1.retrieve(ResourceServiceFactoryImpl.java:40)\r\n\tat org.globalbioticinteractions.nomer.match.TermMatcherContextCaching.retrieve(TermMatcherContextCaching.java:16)\r\n\tat org.eol.globi.service.CacheServiceUtil.createBufferedReader(CacheServiceUtil.java:13)\r\n\tat org.eol.globi.taxon.TaxonCacheService$3.<init>(TaxonCacheService.java:314)\r\n\tat org.eol.globi.taxon.TaxonCacheService.taxonCacheIterator(TaxonCacheService.java:313)\r\n\tat org.eol.globi.taxon.TaxonCacheService.initTaxonCache(TaxonCacheService.java:232)\r\n\tat org.eol.globi.taxon.TaxonCacheService.init(TaxonCacheService.java:158)\r\n\tat org.eol.globi.taxon.TaxonCacheService.lazyInit(TaxonCacheService.java:152)\r\n\tat org.eol.globi.taxon.TaxonCacheService.match(TaxonCacheService.java:262)\r\n\tat org.eol.globi.service.TermMatcherHierarchical.match(TermMatcherHierarchical.java:57)\r\n\tat org.globalbioticinteractions.nomer.util.AppendingRowHandler.onRow(AppendingRowHandler.java:36)\r\n\tat org.globalbioticinteractions.nomer.match.MatchUtil.apply(MatchUtil.java:85)\r\n\tat org.globalbioticinteractions.nomer.match.MatchUtil.match(MatchUtil.java:37)\r\n\tat org.globalbioticinteractions.nomer.cmd.CmdAppend.run(CmdAppend.java:20)\r\n\tat picocli.CommandLine.executeUserObject(CommandLine.java:1939)\r\n\tat picocli.CommandLine.access$1300(CommandLine.java:145)\r\n\tat picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2352)\r\n\tat picocli.CommandLine$RunLast.handle(CommandLine.java:2314)\r\n\tat picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)\r\n\tat picocli.CommandLine$RunLast.execute(CommandLine.java:2316)\r\n\tat picocli.CommandLine.execute(CommandLine.java:2078)\r\n\tat org.globalbioticinteractions.nomer.Nomer.run(Nomer.java:57)\r\n\tat org.globalbioticinteractions.nomer.Nomer.main(Nomer.java:46)\r\nCaused by: java.io.IOException: problem retrieving [file:/home/jose/.cache/nomer/wikidata_appended_taxon_ranks.tsv]\r\n\tat bio.guoda.preston.cmd.ContentQueryUtil.handleContentQuery(ContentQueryUtil.java:35)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:63)\r\n\tat bio.guoda.preston.cmd.CmdGet.run(CmdGet.java:42)\r\n\t... 26 more\r\nCaused by: java.io.IOException: [file:/home/jose/.cache/nomer/wikidata_appended_taxon_ranks.tsv] not found.\r\n\tat bio.guoda.preston.cmd.ContentQueryUtil.handleContentQuery(ContentQueryUtil.java:31)\r\n\t... 28 more\r\n```\r\n\r\nThe file `/home/jose/.cache/nomer/wikidata_appended_taxon_ranks.tsv` exists:\r\n`head -n5 /home/jose/.cache/nomer/wikidata_appended_taxon_ranks.tsv`:\r\n```tsv\r\nid\tname\trank\tcommonNames\tpath\tpathIds\tpathNames\texternalUrl\tthumbnailUrl\r\nWD:Q6541077\tsubcohort\t\t아구 @ko | أباشة @ar | падкагорта @be | subcohort @ca | podkohorta @cs | Unterkohorte @de | subcohort @en | subkohorto @eo | subcohorte @es | sous-cohorte @fr | fochohórt @ga | alraj @hu | subcohort @ia | upakohort @id | ქვეკოჰორტა @ka | subcohors @la | поткохорт @mk | sottokoort @mt | subcohort @nl | underkohort @nn | soscoòrta @oc | subcohortă @ro | подкогорта @ru | suttacoorti @scn | subcohorte @sco | аскоһорт @tt | аскоһорт @tt-cyrl | phân đoàn @vi | 亞群 @zh\tsubcohort\tWD:Q6541077\t\thttps://www.wikidata.org/wiki/Q6541077\t\r\nWD:Q6054237\tmagnorder\t\t高目 @zh | رتبة ضخمة @ar | магнатрад @be | магнразред @bg | Magnorder @bn | magnordre @ca | velkořád @cs | Magnorden @da | Magnordnung @de | magnorder @en | magnorden @es | magnordena @eu | magnordre @fr | પ્રગૌત્ર @gu | rendcsoport @hu | magnordine @ia | Magnordine @it | 거목 @ko | Magnordo @la | магноред @mk | magnorder @nl | magnorden @nn | magnòrdre @oc | magnordin @ro | магнотряд @ru | magnòrdini @scn | magnorder @sco | магнтәртип @tt | магнтәртип @tt-cyrl | Magnórdene @vec | đại bộ @vi | میگن آرڈر @ur\tmagnorder\tWD:Q6054237\t\thttps://www.wikidata.org/wiki/Q6054237\t\r\nWD:Q6054637\tsublegion\t\tفيلق ثانوي @ar | Падлегіён @be | sub legion @bs | sublegió @ca | podlegie @cs | Unterlegion @de | sublegion @en | sublegio @eo | sublegión @es | sous-légion @fr | foléigiún @ga | allégió @hu | sublegion @ia | upalegion @id | sublegio @la | подлегија @mk | sottoleġjun @mt | underlegion @nn | подлегион @ru | suttaleggioni @scn | sublegion @sco | аслегион @tt | аслегион @tt-cyrl | 亞部 @zh\tsublegion\tWD:Q6054637\t\thttps://www.wikidata.org/wiki/Q6054637\t\r\nWD:Q22666877\tsuperdomain\t\tفوق النطاق @ar | супэрдамэн @be-tarask | надимперия @bg | superdomini @ca | υπερτομέας @el | superdomain @en | superdomain @en-gb | superdomanio @eo | superdominio @es | superdomeinu @eu | super-domaine @fr | forfhearann @ga | superdominio (taxonomía) @gl | મહાજાગીર @gu | superdominio @ia | superdomain @id | ზედომენი @ka | Supraregio @la | наддомен @mk | overdomene @nn | superdomínio @pt | superdomínio @pt-br | supradomeniu @ro | наддомен @ru | наддомен @sr | superdomän @sv | โดเมนใหญ่ @th | өсдомен @tt | өсдомен @tt-cyrl | ösdomen @tt-latn | مملکت اعلی @ur | 总域 @zh | 总域 @zh-cn | အထက် ဒိုမိန်း @my | superdomain @nia\tsuperdomain\tWD:Q22666877\t\thttps://www.wikidata.org/wiki/Q22666877\r\n```\r\n\r\nWhen I use `nomer` version `0.2.6` (prior to `preston` integration I presume) it works!\r\nLooks like the newer versions of `nomer` does not work with local files (or files not in remote `preston` graph ???)\r\n\r\nI also tried to use `nomer` `translate-names` matcher with local file but it did not work (`IOException`):\r\n```properties\r\nnomer.taxon.name.correction.url=file:///home/jose/globi-gbif/taxon-name-mapping.csv\r\n```\r\n\r\nCould you help me with this?\r\n\r\nThanks.\r\n\r\n\r\n\r\n","closed_by":{"login":"jhpoelen","id":1084872,"node_id":"MDQ6VXNlcjEwODQ4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1084872?v=4","gravatar_id":"","url":"https://api.github.com/users/jhpoelen","html_url":"https://github.com/jhpoelen","followers_url":"https://api.github.com/users/jhpoelen/followers","following_url":"https://api.github.com/users/jhpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jhpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jhpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhpoelen/subscriptions","organizations_url":"https://api.github.com/users/jhpoelen/orgs","repos_url":"https://api.github.com/users/jhpoelen/repos","events_url":"https://api.github.com/users/jhpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jhpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/globalbioticinteractions/nomer/issues/129/timeline","performed_via_github_app":null,"state_reason":"completed"}